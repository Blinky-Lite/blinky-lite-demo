[{"id":"a7b9d689.b8a5e8","type":"tab","label":"blinky-web-app","disabled":false,"info":""},{"id":"6ad7c930.1a06b8","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":false},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}}},"site":{"name":"Blinky-Lite Demo","hideToolbar":"false","allowSwipe":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"2fcf4efd.ad6ea2","type":"ui_group","z":"","name":"Blinky","tab":"3b7abc62.93e464","order":1,"disp":true,"width":"6","collapse":true},{"id":"b94056c.1c9bba8","type":"mqtt-broker","z":"","name":"MQTT-web-app","broker":"broker.shiftr.io","port":"1883","clientid":"blinky-web-app","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"3b7abc62.93e464","type":"ui_tab","z":"","name":"Blinky","icon":"dashboard","order":1},{"id":"b3708eee.6fca3","type":"ui_button","z":"a7b9d689.b8a5e8","name":"Red Button","group":"2fcf4efd.ad6ea2","order":2,"width":0,"height":0,"passthru":false,"label":"{{msg.topic}}","color":"","bgcolor":"{{msg.background}}","icon":"","payload":"","payloadType":"num","topic":"blinky-lite-tutorial/web-app/red/ledState","x":710,"y":80,"wires":[["dd65fd39.ef0a7"]]},{"id":"37446d4f.cf4742","type":"mqtt out","z":"a7b9d689.b8a5e8","name":"","topic":"","qos":"","retain":"","broker":"b94056c.1c9bba8","x":1110,"y":160,"wires":[]},{"id":"33e280b8.9fcbc","type":"mqtt in","z":"a7b9d689.b8a5e8","name":"","topic":"tutorial/dma/red/#","qos":"0","broker":"b94056c.1c9bba8","x":160,"y":100,"wires":[["39f2bd14.e70492"]]},{"id":"39f2bd14.e70492","type":"json","z":"a7b9d689.b8a5e8","name":"","property":"payload","action":"","pretty":false,"x":330,"y":100,"wires":[["875ab289.86358","87e9fdd.a28cf","29f91679.1de79a"]]},{"id":"875ab289.86358","type":"function","z":"a7b9d689.b8a5e8","name":"Led State","func":"if (msg.topic != 'tutorial/dma/red/ledState') return null;\nif (msg.payload == 0)\n{\n    msg.topic = 'Off';\n    msg.background = '#800000';\n}\nif (msg.payload == 1)\n{\n    msg.topic = 'Blinking';\n    msg.background = '#ff6666';\n}\nif (msg.payload == 2) \n{\n    msg.topic = 'On';\n    msg.background = '#ff0000';\n}\nflow.set('red/ledState',msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":80,"wires":[["b3708eee.6fca3"]]},{"id":"dd65fd39.ef0a7","type":"function","z":"a7b9d689.b8a5e8","name":"Change LedState","func":"var ledState = flow.get('red/ledState');\nledState = ledState + 1;\nif (ledState > 2) ledState = 0;\nmsg.topic = 'tutorial/web-app/red/ledState';\nmsg.payload = ledState;\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":80,"wires":[["37446d4f.cf4742"]]},{"id":"74cdbda4.17a944","type":"ui_gauge","z":"a7b9d689.b8a5e8","name":"Red LED Intensity","group":"2fcf4efd.ad6ea2","order":1,"width":0,"height":0,"gtype":"gage","title":"LED Intensity","label":"","format":"{{value}}","min":0,"max":"100","colors":["#ca3838","#ca3838","#ca3838"],"seg1":"","seg2":"","x":690,"y":120,"wires":[]},{"id":"87e9fdd.a28cf","type":"function","z":"a7b9d689.b8a5e8","name":"Led Intensity","func":"if (msg.topic != 'tutorial/dma/red/ledIntensity') return null;\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":120,"wires":[["74cdbda4.17a944"]]},{"id":"fd8577.f6e7fa88","type":"ui_slider","z":"a7b9d689.b8a5e8","name":"Red Blink Period","label":"Interval","group":"2fcf4efd.ad6ea2","order":3,"width":0,"height":0,"passthru":false,"topic":"tutorial/web-app/red/ledToggle","min":"1","max":"10","step":"1","x":690,"y":160,"wires":[["37446d4f.cf4742"]]},{"id":"2ca03bc2.f1bb94","type":"inject","z":"a7b9d689.b8a5e8","name":"Init","topic":"","payload":"5","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"5","x":490,"y":220,"wires":[["234f518b.c2adde"]]},{"id":"ca13541b.a791a8","type":"ui_button","z":"a7b9d689.b8a5e8","name":"Green Button","group":"2fcf4efd.ad6ea2","order":5,"width":0,"height":0,"passthru":false,"label":"{{msg.topic}}","color":"","bgcolor":"{{msg.background}}","icon":"","payload":"","payloadType":"num","topic":"blinky-lite-tutorial/web-app/green/ledState","x":730,"y":340,"wires":[["6298b1fc.0e794"]]},{"id":"35c4eddb.a566a2","type":"mqtt out","z":"a7b9d689.b8a5e8","name":"","topic":"","qos":"","retain":"false","broker":"b94056c.1c9bba8","x":1090,"y":420,"wires":[]},{"id":"e92c0303.9b58f","type":"mqtt in","z":"a7b9d689.b8a5e8","name":"","topic":"tutorial/dma/green/#","qos":"0","broker":"b94056c.1c9bba8","x":170,"y":380,"wires":[["379de900.b83a08"]]},{"id":"379de900.b83a08","type":"json","z":"a7b9d689.b8a5e8","name":"","property":"payload","action":"","pretty":false,"x":350,"y":380,"wires":[["a990bbc5.5883a8","76b6a3e8.d903bc","8c59f67b.9759b8"]]},{"id":"a990bbc5.5883a8","type":"function","z":"a7b9d689.b8a5e8","name":"Led State","func":"if (msg.topic != 'tutorial/dma/green/ledState') return null;\nif (msg.payload == 0)\n{\n    msg.topic = 'Off';\n    msg.background = '#008000';\n}\nif (msg.payload == 1)\n{\n    msg.topic = 'Blinking';\n    msg.background = '#66ff66';\n}\nif (msg.payload == 2) \n{\n    msg.topic = 'On';\n    msg.background = '#00ff00';\n}\nflow.set('green/ledState',msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":340,"wires":[["ca13541b.a791a8"]]},{"id":"6298b1fc.0e794","type":"function","z":"a7b9d689.b8a5e8","name":"Change LedState","func":"var ledState = flow.get('green/ledState');\nledState = ledState + 1;\nif (ledState > 2) ledState = 0;\nmsg.topic = 'tutorial/web-app/green/ledState';\nmsg.payload = ledState;\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":340,"wires":[["35c4eddb.a566a2"]]},{"id":"e570b753.82b348","type":"ui_gauge","z":"a7b9d689.b8a5e8","name":"Green LED Intensity","group":"2fcf4efd.ad6ea2","order":4,"width":0,"height":0,"gtype":"gage","title":"LED Intensity","label":"","format":"{{value}}","min":0,"max":"100","colors":["#70ff48","#70ff48","#70ff48"],"seg1":"","seg2":"","x":700,"y":380,"wires":[]},{"id":"76b6a3e8.d903bc","type":"function","z":"a7b9d689.b8a5e8","name":"Led Intensity","func":"if (msg.topic != 'tutorial/dma/green/ledIntensity') return null;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":380,"wires":[["e570b753.82b348"]]},{"id":"3d4f5e9e.1b81f2","type":"ui_slider","z":"a7b9d689.b8a5e8","name":"Green Blink Period","label":"Interval","group":"2fcf4efd.ad6ea2","order":6,"width":0,"height":0,"passthru":false,"topic":"tutorial/web-app/green/ledToggle","min":"1","max":"10","step":"1","x":710,"y":420,"wires":[["35c4eddb.a566a2"]]},{"id":"29f91679.1de79a","type":"function","z":"a7b9d689.b8a5e8","name":"Led Toggle","func":"if (msg.topic != 'tutorial/dma/red/ledToggle') return null;\nflow.set('red/ledToggle',msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":160,"wires":[["fd8577.f6e7fa88"]]},{"id":"234f518b.c2adde","type":"function","z":"a7b9d689.b8a5e8","name":"Status","func":"msg.topic = 'tutorial/web-app/red/status';\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":220,"wires":[["37446d4f.cf4742"]]},{"id":"8c59f67b.9759b8","type":"function","z":"a7b9d689.b8a5e8","name":"Led Toggle","func":"if (msg.topic != 'tutorial/dma/green/ledToggle') return null;\nflow.set('red/greenToggle',msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":420,"wires":[["3d4f5e9e.1b81f2"]]},{"id":"47fc8428.a55a1c","type":"inject","z":"a7b9d689.b8a5e8","name":"Init","topic":"","payload":"5","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"8","x":530,"y":480,"wires":[["357d365b.933d2a"]]},{"id":"357d365b.933d2a","type":"function","z":"a7b9d689.b8a5e8","name":"Status","func":"msg.topic = 'tutorial/web-app/green/status';\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":480,"wires":[["35c4eddb.a566a2"]]}]